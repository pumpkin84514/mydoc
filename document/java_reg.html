<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java 正则表达式详解 | Pumpkin WIKI</title>
    <meta name="description" content="Meet 1000 Books &amp; Unit Them Into 1 Wiki">
    <meta name="generator" content="VuePress 1.4.0">
    <meta name="theme-color" content="blue">
  <link rel="icon" href="/mydoc/img/logo.ico">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/mydoc/assets/css/0.styles.86890f34.css" as="style"><link rel="preload" href="/mydoc/assets/js/app.b6e57e18.js" as="script"><link rel="preload" href="/mydoc/assets/js/4.f09912a0.js" as="script"><link rel="preload" href="/mydoc/assets/js/3.9272f744.js" as="script"><link rel="preload" href="/mydoc/assets/js/13.96609daa.js" as="script"><link rel="prefetch" href="/mydoc/assets/js/10.a69b94b8.js"><link rel="prefetch" href="/mydoc/assets/js/11.5cea22fa.js"><link rel="prefetch" href="/mydoc/assets/js/12.bd663d1f.js"><link rel="prefetch" href="/mydoc/assets/js/14.551bcd4a.js"><link rel="prefetch" href="/mydoc/assets/js/15.5b5930c1.js"><link rel="prefetch" href="/mydoc/assets/js/16.55251c5c.js"><link rel="prefetch" href="/mydoc/assets/js/17.7b271c4c.js"><link rel="prefetch" href="/mydoc/assets/js/5.d4b5e35d.js"><link rel="prefetch" href="/mydoc/assets/js/6.3baf95b0.js"><link rel="prefetch" href="/mydoc/assets/js/7.7dd0f1ff.js"><link rel="prefetch" href="/mydoc/assets/js/8.8032621c.js"><link rel="prefetch" href="/mydoc/assets/js/9.946c1068.js"><link rel="prefetch" href="/mydoc/assets/js/vendors~flowchart.c9ebb3ea.js">
    <link rel="stylesheet" href="/mydoc/assets/css/0.styles.86890f34.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div class="loading-container"><!----> <img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/home/images/loading.gif" class="loading-img"></div> <div class="hide"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mydoc/" class="home-link router-link-active"><img alt="Pumpkin WIKI" src="/mydoc/img/avatar.png" class="logo"> <span class="site-name can-hide">
            Pumpkin WIKI
        </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mydoc/" class="nav-link"><!---->
    主页
</a></div><div class="nav-item"><a href="/mydoc/document/" class="nav-link router-link-active"><!---->
    主题文档
</a></div><div class="nav-item"><a href="https://github.com/pumpkin84514/mydoc" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mydoc/" class="nav-link"><!---->
    主页
</a></div><div class="nav-item"><a href="/mydoc/document/" class="nav-link router-link-active"><!---->
    主题文档
</a></div><div class="nav-item"><a href="https://github.com/pumpkin84514/mydoc" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java学习</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mydoc/document/" class="sidebar-link">介绍</a></li><li><a href="/mydoc/document/java_reg.html" class="active sidebar-link">Java 正则表达式详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_1-正则表达式" class="sidebar-link">1. 正则表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_1-1-什么是正则表达式" class="sidebar-link">1.1 什么是正则表达式</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_1-2-示例" class="sidebar-link">1.2 示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_2-正则表达式的编写规则" class="sidebar-link">2. 正则表达式的编写规则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_2-1-常见匹配符号" class="sidebar-link">2.1 常见匹配符号</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_2-2-元字符" class="sidebar-link">2.2 元字符</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_2-3-限定符" class="sidebar-link">2.3 限定符</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_2-4-分组和反向引用" class="sidebar-link">2.4 分组和反向引用</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_2-5-否定先行断言（negative-lookahead）" class="sidebar-link">2.5 否定先行断言（Negative lookahead）</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_2-6-指定正则表达式的模式" class="sidebar-link">2.6 指定正则表达式的模式</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_2-7-java-中的反斜杠" class="sidebar-link">2.7 Java 中的反斜杠</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_2-8-易错点示例" class="sidebar-link">2.8 易错点示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_3-在字符串中使用正则表达式" class="sidebar-link">3. 在字符串中使用正则表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_3-1-内置的字符串正则处理方法" class="sidebar-link">3.1 内置的字符串正则处理方法</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_3-2-示例" class="sidebar-link">3.2 示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_4-模式和匹配" class="sidebar-link">4. 模式和匹配</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_5-若干个常用例子" class="sidebar-link">5. 若干个常用例子</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_5-1-中文的匹配" class="sidebar-link">5.1 中文的匹配</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_5-2-数字范围的匹配" class="sidebar-link">5.2 数字范围的匹配</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_5-3-img-标签的匹配" class="sidebar-link">5.3 img 标签的匹配</a></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_5-4-贪婪与非贪婪模式的匹配" class="sidebar-link">5.4 贪婪与非贪婪模式的匹配</a></li></ul></li><li class="sidebar-sub-header"><a href="/mydoc/document/java_reg.html#_6-推荐两个在线正则工具" class="sidebar-link">6. 推荐两个在线正则工具</a></li></ul></li></ul></section></li></ul> </aside> <div class="page-content animated fadeInDown"><main class="page"> <div class="theme-dew-content content__default"><h1 id="java-正则表达式详解"><a href="#java-正则表达式详解" class="header-anchor">#</a> Java 正则表达式详解</h1> <h2 id="_1-正则表达式"><a href="#_1-正则表达式" class="header-anchor">#</a> 1. 正则表达式</h2> <h3 id="_1-1-什么是正则表达式"><a href="#_1-1-什么是正则表达式" class="header-anchor">#</a> 1.1 什么是正则表达式</h3> <p>正则表达式
: 定义一个搜索模式的字符串。</p> <p>正则表达式可以用于搜索、编辑和操作文本。</p> <p>正则对文本的分析或修改过程为：首先正则表达式应用的是文本字符串（text/string），它会以定义的模式从左到右匹配文本，每个源字符只匹配一次。</p> <h3 id="_1-2-示例"><a href="#_1-2-示例" class="header-anchor">#</a> 1.2 示例</h3> <table><thead><tr><th>正则表达式</th> <th style="text-align:center;">匹配</th></tr></thead> <tbody><tr><td>this is text</td> <td style="text-align:center;">精确匹配字符串 &quot;this is text&quot;</td></tr> <tr><td>this\s+is\s+text</td> <td style="text-align:center;">匹配单词 &quot;this&quot; 后跟一个或多个空格字符，后跟词 &quot;is&quot; 后跟一个或多个空格字符，后跟词 &quot;text&quot;</td></tr> <tr><td>^\d+(.\d+)?</td> <td style="text-align:center;">^ 定义模式必须匹配字符串的开始，d+ 匹配一个或多个数字，? 表明小括号内的语句是可选的，. 匹配 &quot;.&quot;，小括号表示分组。例如匹配：&quot;5&quot;、&quot;1.5&quot; 和 &quot;2.21&quot;</td></tr></tbody></table> <h2 id="_2-正则表达式的编写规则"><a href="#_2-正则表达式的编写规则" class="header-anchor">#</a> 2. 正则表达式的编写规则</h2> <h3 id="_2-1-常见匹配符号"><a href="#_2-1-常见匹配符号" class="header-anchor">#</a> 2.1 常见匹配符号</h3> <table><thead><tr><th>正则表达式</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td>.</td> <td style="text-align:center;">匹配所有单个字符，除了换行符（Linux 中换行是 \n，Windows 中换行是 \r\n）</td></tr> <tr><td>^regex</td> <td style="text-align:center;">正则必须匹配字符串开头</td></tr> <tr><td>[abc]</td> <td style="text-align:center;">复选集定义，匹配字母 a 或 b 或 c</td></tr> <tr><td>[abc][vz]</td> <td style="text-align:center;">复选集定义，匹配字母 a 或 b 或 c，后面跟着 v 或 z</td></tr> <tr><td>[^abc]</td> <td style="text-align:center;">当插入符 ^ 在中括号中以第一个字符开始显示，则表示否定模式。此模式匹配所有字符，除了 a 或 b 或 c</td></tr> <tr><td>[a-d1-7]</td> <td style="text-align:center;">范围匹配，匹配字母 a 到 d 和数字从 1 到 7 之间，但不匹配 d1</td></tr> <tr><td>XZ</td> <td style="text-align:center;">匹配 X 后直接跟着 Z</td></tr> <tr><td>X|Z</td> <td style="text-align:center;">匹配 X 或 Z</td></tr></tbody></table> <h3 id="_2-2-元字符"><a href="#_2-2-元字符" class="header-anchor">#</a> 2.2 元字符</h3> <p>元字符是一个预定义的字符。</p> <table><thead><tr><th>正则表达式</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td>\d</td> <td style="text-align:center;">匹配一个数字，是 [0-9] 的简写</td></tr> <tr><td>\D</td> <td style="text-align:center;">匹配一个非数字，是 [^0-9] 的简写</td></tr> <tr><td>\s</td> <td style="text-align:center;">匹配一个空格，是 [ \t\n\x0b\r\f] 的简写</td></tr> <tr><td>\S</td> <td style="text-align:center;">匹配一个非空格</td></tr> <tr><td>\w</td> <td style="text-align:center;">匹配一个单词字符（大小写字母、数字、下划线），是 [a-zA-Z_0-9] 的简写</td></tr> <tr><td>\W</td> <td style="text-align:center;">匹配一个非单词字符（除了大小写字母、数字、下划线之外的字符），等同于 [^\w]</td></tr></tbody></table> <h3 id="_2-3-限定符"><a href="#_2-3-限定符" class="header-anchor">#</a> 2.3 限定符</h3> <p>限定符定义了一个元素可以发生的频率。</p> <table><thead><tr><th>正则表达式</th> <th style="text-align:center;">描述</th> <th style="text-align:center;">举例</th></tr></thead> <tbody><tr><td>*</td> <td style="text-align:center;">匹配 &gt;=0 个，是 {0,} 的简写</td> <td style="text-align:center;">X* 表示匹配零个或多个字母 X，.* 表示匹配任何字符串</td></tr> <tr><td>+</td> <td style="text-align:center;">匹配 &gt;=1 个，是 {1,} 的简写</td> <td style="text-align:center;">X+ 表示匹配一个或多个字母 X</td></tr> <tr><td>?</td> <td style="text-align:center;">只匹配 X 个字符</td> <td style="text-align:center;">\d{3} 表示匹配 3 个数字，.{10} 表示匹配任何长度是 10 的字符串</td></tr> <tr><td>{X,Y}</td> <td style="text-align:center;">匹配 &gt;=X 且 &lt;=Y 个</td> <td style="text-align:center;">\d{1,4} 表示匹配至少 1 个最多 4 个数字</td></tr> <tr><td>*?</td> <td style="text-align:center;">如果 ? 是限定符 * 或 + 或 ? 或 {} 后面的第一个字符，那么表示非贪婪模式（尽可能少的匹配字符），而不是默认的贪婪模式</td> <td style="text-align:center;"></td></tr></tbody></table> <h3 id="_2-4-分组和反向引用"><a href="#_2-4-分组和反向引用" class="header-anchor">#</a> 2.4 分组和反向引用</h3> <p>小括号 () 可以达到对正则表达式进行分组的效果。</p> <p>模式分组后会在正则表达式中创建反向引用。反向引用会保存匹配模式分组的字符串片断，这使得我们可以获取并使用这个字符串片断。</p> <p>在以正则表达式替换字符串的语法中，是通过 $ 来引用分组的反向引用，$0 是匹配完整模式的字符串（注意在 JavaScript 中是用 $&amp; 表示）；$1 是第一个分组的反向引用；$2 是第二个分组的反向引用，以此类推。</p> <p><strong>示例</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wuxianjiezh<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>regex</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegexTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 去除单词与 , 和 . 之间的空格</span>
        <span class="token class-name">String</span> <span class="token class-name">Str</span> <span class="token operator">=</span> <span class="token string">&quot;Hello , World .&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> pattern <span class="token operator">=</span> <span class="token string">&quot;(\\w)(\\s+)([.,])&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// $0 匹配 `(\w)(\s+)([.,])` 结果为 `o空格,` 和 `d空格.`</span>
        <span class="token comment">// $1 匹配 `(\w)` 结果为 `o` 和 `d`</span>
        <span class="token comment">// $2 匹配 `(\s+)` 结果为 `空格` 和 `空格`</span>
        <span class="token comment">// $3 匹配 `([.,])` 结果为 `,` 和 `.`</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Str</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> <span class="token string">&quot;$1$3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, World.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>上面的例子中，我们使用了 [.] 来匹配普通字符 . 而不需要使用 [\.]。因为正则对于 [] 中的 .，会自动处理为 [.]，即普通字符 . 进行匹配。</p> <h4 id="_2-4-1-仅分组但无反向引用"><a href="#_2-4-1-仅分组但无反向引用" class="header-anchor">#</a> 2.4.1 仅分组但无反向引用</h4> <p>当我们在小括号 () 内的模式开头加入 ?:，那么表示这个模式仅分组，但不创建反向引用。
<strong>示例</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wuxianjiezh<span class="token punctuation">.</span>regex</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Matcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegexTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;img.jpg&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// 分组且创建反向引用</span>
        <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;(jpg|png)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>运行结果：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>jpg
jpg
</code></pre></div><p><strong>若源码改为：</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wuxianjiezh<span class="token punctuation">.</span>regex</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Matcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegexTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;img.jpg&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// 分组但不创建反向引用</span>
        <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;(?:jpg|png)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>运行结果：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>jpg
Exception in thread &quot;main&quot; java.lang.IndexOutOfBoundsException: No group 1
    at java.util.regex.Matcher.group(Matcher.java:538)
    at com.wuxianjiezh.regex.RegexTest.main(RegexTest.java:15)
</code></pre></div><h4 id="_2-4-2-分组的反向引用副本"><a href="#_2-4-2-分组的反向引用副本" class="header-anchor">#</a> 2.4.2 分组的反向引用副本</h4> <p>Java 中可以在小括号中使用 ?&lt;name&gt;将小括号中匹配的内容保存为一个名字为 name 的副本。
<strong>示例</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wuxianjiezh<span class="token punctuation">.</span>regex</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Matcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegexTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;@wxj 你好啊&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;@(?&lt;first&gt;\\w+\\s)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 保存一个副本</span>
        <span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">&quot;first&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>运行结果：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>@wxj 
wxj 
wxj 
</code></pre></div><h3 id="_2-5-否定先行断言（negative-lookahead）"><a href="#_2-5-否定先行断言（negative-lookahead）" class="header-anchor">#</a> 2.5 否定先行断言（Negative lookahead）</h3> <p>我们可以创建否定先行断言模式的匹配，即某个字符串后面不包含另一个字符串的匹配模式。</p> <p>否定先行断言模式通过 (?!pattern) 定义。比如，我们匹配后面不是跟着 &quot;b&quot; 的 &quot;a&quot;：</p> <div class="language- extra-class"><pre class="language-text"><code>a(?!b)
</code></pre></div><h3 id="_2-6-指定正则表达式的模式"><a href="#_2-6-指定正则表达式的模式" class="header-anchor">#</a> 2.6 指定正则表达式的模式</h3> <p>可以在正则的开头指定模式修饰符。</p> <ul><li>(?i) 使正则忽略大小写。</li> <li>(?s) 表示单行模式（&quot;single line mode&quot;）使正则的 . 匹配所有字符，包括换行符。</li> <li>(?m) 表示多行模式（&quot;multi-line mode&quot;），使正则的 ^ 和 $ 匹配字符串中每行的开始和结束。</li></ul> <h3 id="_2-7-java-中的反斜杠"><a href="#_2-7-java-中的反斜杠" class="header-anchor">#</a> 2.7 Java 中的反斜杠</h3> <p>反斜杠 \ 在 Java 中表示转义字符，这意味着 \ 在 Java 拥有预定义的含义。</p> <p>这里例举两个特别重要的用法：</p> <ul><li>在匹配 . 或 { 或 [ 或 ( 或 ? 或 $ 或 ^ 或 * 这些特殊字符时，需要在前面加上 \，比如匹配 . 时，Java 中要写为 \.，但对于正则表达式来说就是 .。</li> <li>在匹配 \ 时，Java 中要写为 \\，但对于正则表达式来说就是 \。</li></ul> <div class="custom-block tip"><p>注意：</p> <p>Java 中的正则表达式字符串有两层含义，首先 Java 字符串转义出符合正则表达式语法的字符串，然后再由转义后的正则表达式进行模式匹配。</p></div> <h3 id="_2-8-易错点示例"><a href="#_2-8-易错点示例" class="header-anchor">#</a> 2.8 易错点示例</h3> <ul><li>[jpg|png] 代表匹配 j 或 p 或 g 或 p 或 n 或 g 中的任意一个字符。</li> <li>(jpg|png) 代表匹配 jpg 或 png。</li></ul> <h2 id="_3-在字符串中使用正则表达式"><a href="#_3-在字符串中使用正则表达式" class="header-anchor">#</a> 3. 在字符串中使用正则表达式</h2> <h3 id="_3-1-内置的字符串正则处理方法"><a href="#_3-1-内置的字符串正则处理方法" class="header-anchor">#</a> 3.1 内置的字符串正则处理方法</h3> <p>在 Java 中有四个内置的运行正则表达式的方法，分别是 <font color="red">matches()</font>、<font color="red">split())</font>、<font color="red">replaceFirst()</font>、<font color="red">replaceAll()</font>。注意 <font color="red">replace()</font> 方法不支持正则表达式。</p> <table><thead><tr><th>方法</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td><font color="red">s.matches(&quot;regex&quot;)</font></td> <td style="text-align:center;">当仅且当正则匹配整个字符串时返回 <font color="red">true</font></td></tr> <tr><td><font color="red">s.split(&quot;regex&quot;)</font></td> <td style="text-align:center;">按匹配的正则表达式切片字符串</td></tr> <tr><td><font color="red">s.replaceFirst(&quot;regex&quot;, &quot;replacement&quot;)</font></td> <td style="text-align:center;">替换首次匹配的字符串片段</td></tr> <tr><td><font color="red">s.replaceAll(&quot;regex&quot;, &quot;replacement&quot;)</font></td> <td style="text-align:center;">替换所有匹配的字符</td></tr></tbody></table> <h3 id="_3-2-示例"><a href="#_3-2-示例" class="header-anchor">#</a> 3.2 示例</h3> <p><strong>示例代码：</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wuxianjiezh<span class="token punctuation">.</span>regex</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegexTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;wxj&quot;</span><span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">&quot;wxj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;----------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array <span class="token operator">=</span> <span class="token string">&quot;w x j&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;\\s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> item <span class="token operator">:</span> array<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;----------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;w x j&quot;</span><span class="token punctuation">.</span><span class="token function">replaceFirst</span><span class="token punctuation">(</span><span class="token string">&quot;\\s&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;----------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;w x j&quot;</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;\\s&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>运行结果：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>true
----------
w
x
j
----------
w-x j
----------
w-x-j
</code></pre></div><h2 id="_4-模式和匹配"><a href="#_4-模式和匹配" class="header-anchor">#</a> 4. 模式和匹配</h2> <p>Java 中使用正则表达式需要用到两个类，分别为 <font color="red">java.util.regex.Pattern</font> 和 <font color="red">java.util.regex.Matcher</font>。</p> <p>第一步，通过正则表达式创建模式对象 <font color="red">Pattern</font>。</p> <p>第二步，通过模式对象 <font color="red">Pattern</font>，根据指定字符串创建匹配对象 <font color="red">Matcher</font>。</p> <p>第三步，通过匹配对象 <font color="red">Matcher</font>，根据正则表达式操作字符串。</p> <p>来个例子，加深理解：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wuxianjiezh<span class="token punctuation">.</span>regex</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Matcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegexTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> text <span class="token operator">=</span> <span class="token string">&quot;Hello Regex!&quot;</span><span class="token punctuation">;</span>

        <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\w+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Java 中忽略大小写，有两种写法：</span>
        <span class="token comment">// Pattern pattern = Pattern.compile(&quot;\\w+&quot;, Pattern.CASE_INSENSITIVE);</span>
        <span class="token comment">// Pattern pattern = Pattern.compile(&quot;(?i)\\w+&quot;); // 推荐写法</span>
        <span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 遍例所有匹配的序列</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Start index: &quot;</span> <span class="token operator">+</span> matcher<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot; End index: &quot;</span> <span class="token operator">+</span> matcher<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 创建第两个模式，将空格替换为 tab</span>
        <span class="token class-name">Pattern</span> replace <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\s+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> matcher2 <span class="token operator">=</span> replace<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher2<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>运行结果：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Start index: 0 End index: 5 Hello
Start index: 6 End index: 11 Regex
Hello    Regex!
</code></pre></div><h2 id="_5-若干个常用例子"><a href="#_5-若干个常用例子" class="header-anchor">#</a> 5. 若干个常用例子</h2> <h3 id="_5-1-中文的匹配"><a href="#_5-1-中文的匹配" class="header-anchor">#</a> 5.1 中文的匹配</h3> <p><font color="red">[\u4e00-\u9fa5]+</font> 代表匹配中文字。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wuxianjiezh<span class="token punctuation">.</span>regex</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Matcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegexTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;閑人到人间&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;[\\u4e00-\\u9fa5]+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>运行结果：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>閑人到人间
</code></pre></div><h3 id="_5-2-数字范围的匹配"><a href="#_5-2-数字范围的匹配" class="header-anchor">#</a> 5.2 数字范围的匹配</h3> <p>比如，匹配 1990 到 2017。</p> <div class="custom-block tip"><p><strong>注意</strong>：这里有个新手易范的错误，就是正则 <font color="red">[1990-2017]</font>，实际这个正则只匹配 <font color="red">0</font> 或 <font color="red">1</font> 或 <font color="red">2</font> 或 <font color="red">7</font> 或 <font color="red">9</font> 中的任一个字符。</p></div> <p>正则表达式匹配数字范围时，首先要确定最大值与最小值，最后写中间值。</p> <p>正确的匹配方式：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wuxianjiezh<span class="token punctuation">.</span>regex</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Matcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegexTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;1990\n2010\n2017&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// 这里应用了 (?m) 的多行匹配模式，只为方便我们测试输出</span>
        <span class="token comment">// &quot;^1990$|^199[1-9]$|^20[0-1][0-6]$|^2017$&quot; 为判断 1990-2017 正确的正则表达式</span>
        <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;(?m)^1990$|^199[1-9]$|^20[0-1][0-6]$|^2017$&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>运行结果：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>1990
2010
2017
</code></pre></div><h3 id="_5-3-img-标签的匹配"><a href="#_5-3-img-标签的匹配" class="header-anchor">#</a> 5.3 img 标签的匹配</h3> <p>比如，获取图片文件内容，这里我们考虑了一些不规范的 img 标签写法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wuxianjiezh<span class="token punctuation">.</span>regex</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Matcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegexTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;&lt;img  src='aaa.jpg' /&gt;&lt;img src=bbb.png/&gt;&lt;img src=\&quot;ccc.png\&quot;/&gt;&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;&lt;img src='ddd.exe'/&gt;&lt;img src='eee.jpn'/&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// 这里我们考虑了一些不规范的 img 标签写法，比如：空格、引号</span>
        <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;img\\s+src=(?:['\&quot;])?(?&lt;src&gt;\\w+.(jpg|png))(?:['\&quot;])?\\s*/&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>运行结果：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>aaa.jpg
bbb.png
ccc.png
</code></pre></div><h3 id="_5-4-贪婪与非贪婪模式的匹配"><a href="#_5-4-贪婪与非贪婪模式的匹配" class="header-anchor">#</a> 5.4 贪婪与非贪婪模式的匹配</h3> <p>比如，获取 div 标签中的文本内容：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wuxianjiezh<span class="token punctuation">.</span>regex</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Matcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegexTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;&lt;div&gt;文章标题&lt;/div&gt;&lt;div&gt;发布时间&lt;/div&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// 贪婪模式</span>
        <span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;div&gt;(?&lt;title&gt;.+)&lt;/div&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 非贪婪模式</span>
        pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;div&gt;(?&lt;title&gt;.+?)&lt;/div&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>运行结果：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>文章标题&lt;/div&gt;&lt;div&gt;发布时间
--------------
文章标题
发布时间
</code></pre></div><h2 id="_6-推荐两个在线正则工具"><a href="#_6-推荐两个在线正则工具" class="header-anchor">#</a> 6. 推荐两个在线正则工具</h2> <ul><li>JavaScript、Python 等的在线表达式工具：https://regex101.com/</li> <li>Java 在线表达式工具：http://www.regexplanet.com/advanced/java/index.html</li></ul></div> <!----> <div class="page-nav"><hr> <p class="inner"><span class="prev">
      ←
      <a href="/mydoc/document/" class="prev router-link-active">介绍</a></span> <!----></p></div> </main></div> <footer class="footer page-footer"></footer></div></div><div class="global-ui"><div class="reading-progress top" data-v-21b39eda><div class="progress" data-v-21b39eda></div></div><!----></div></div>
    <script src="/mydoc/assets/js/app.b6e57e18.js" defer></script><script src="/mydoc/assets/js/4.f09912a0.js" defer></script><script src="/mydoc/assets/js/3.9272f744.js" defer></script><script src="/mydoc/assets/js/13.96609daa.js" defer></script>
  </body>
</html>
